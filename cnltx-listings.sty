% --------------------------------------------------------------------------
% the CNLTX bundle
%
%   LaTeX source code and output
%
% --------------------------------------------------------------------------
% Clemens Niederberger
% Web:    https://github.com/cgnieder/cnltx/
% E-Mail: contact@mychemistry.eu
% --------------------------------------------------------------------------
% Copyright 2013 Clemens Niederberger
%
% This work may be distributed and/or modified under the
% conditions of the LaTeX Project Public License, either version 1.3
% of this license or (at your option) any later version.
% The latest version of this license is in
%   http://www.latex-project.org/lppl.txt
% and version 1.3 or later is part of all distributions of LaTeX
% version 2005/12/01 or later.
%
% This work has the LPPL maintenance status `maintained'.
%
% The Current Maintainer of this work is Clemens Niederberger.
% --------------------------------------------------------------------------
% If you have any ideas, questions, suggestions or bugs to report, please
% feel free to contact me.
% --------------------------------------------------------------------------
\RequirePackage{cnltx-base}
\ProvidesPackage{cnltx-listings}[\cnltx@@date\space \cnltx@@version\space \cnltx@@info]

\cnltx@create@message{listings}{Error}
\cnltx@create@message{listings}{Warning}
\cnltx@create@message{listings}{WarningNoLine}
\cnltx@create@message{listings}{Info}

\RequirePackage{listings}

% --------------------------------------------------------------------------
% a listings language BibTeX:
\lstdefinelanguage{BibTeX}{
  % entry types:
  morekeywords = {
    % regular types:
    @article,
    @book,@mvbook,@inbook,@bookinbook,@suppbook,@booklet,
    @collection,@mvcollection,@incollection,@suppcollection,
    @manual,
    @misc,
    @online,
    @patent,
    @periodical,
    @suppperiodical,
    @proceedings,@mvproceedings,@inproceedings,
    @reference,@mvreference,@inreference,
    @report,
    @set,
    @thesis,
    @unpublished,
    @xdata,
    @customa,@customb,@customc,@customd,@custome,@customf,
    % type aliases:
    @conference,
    @electronic,
    @mastersthesis,
    @phdthesis,
    @techreport,
    @www,
    % unsupported types:
    @artwork,
    @audiobibnote,
    @commentary,
    @image,
    @jurisdiction,
    @legislation,
    @legal,
    @letter,
    @movie,
    @music
    @performance,
    @review,
    @software,
    @standard,
    @video,
    % cnltx types:
    @package
  } ,
  % entry fields:
  morekeywords = [2]{
    % data fields:
    abstract,
    addendum,
    afterword,
    annotation,
    annotator,
    author,
    authortype,
    bookauthor,
    bookpagination,
    booksubtitle,
    booktitle,
    booktitleaddon,
    chapter,
    commentator,
    date,
    doi,
    edition,
    editor,editora,editorb,editorc,
    editortype,
    editoratype,editorbtype,editorctype,
    eid,
    entrysubtype,
    eprint,
    eprintclass,
    eprinttype,
    eventdate,
    eventtitle,
    eventtitleaddon,
    file,
    foreword,
    holder,
    howpublished,
    indextitle,
    institution,
    introduction,
    isan,
    isbn,
    ismn,
    isrn,
    issn,
    issue,
    issuesubtitle,
    issuetitle,
    iswc,
    journalsubtitle,
    journaltitle,
    label,
    language,
    library,
    location,
    mainsubtitle,
    maintitle,
    maintitleaddon,
    month,
    nameaddon,
    note,
    number,
    organization,
    origdate,
    origlanguage,
    origlocation,
    origpublisher,
    origtitle,
    pages,
    pagetotal,
    pagination,
    part,
    publisher,
    pubstate,
    reprinttitle,
    series,
    shortauthor,
    shorteditor,
    shorthand,
    shorthandintro,
    shortjournal,
    shortseries,
    shorttitle,
    subtitle,
    title,
    titleaddon,
    translator,
    type,
    url,
    urldate,
    venue,
    version,
    volume,
    volumes,
    year,
    % special fields:
    crossref,
    entryset,
    execute,
    gender,
    hyphenation,
    ids,
    indexsorttitle,
    keywords,
    options,
    presort,
    related,
    relatedoptions,
    relatedtype,
    relatedstring,
    sortkey,
    sortname,
    sortshorthand,
    sorttitle,
    sortyear,
    xdata,
    xref,
    % custom fields:
    namea,nameb,namec,
    nameatype,namebtype,namectype,
    lista,listb,listc,listd,liste.listf,
    usera,userb,userc,userd,usere,userf,
    verba,verbb,verbc,
    % field aliases:
    address,
    annote,
    archiveprefix,
    journal,
    key,
    pdf,
    primaryclass,
    school,
    % cnltx fields:
    maintainer
  } ,
  morestring = [b]{"} ,
  morecomment = [l]{\%} ,
  sensitive = false
}

% --------------------------------------------------------------------------
% command names `moretexcs' that are used as not-indexed texcs for the
% listings style `cnltx':
\def\cnltx@predefined@control@sequences{%
  % symbols:
  -,@,
  % csnames beginning with @:
  @alph,@Alph,@arabic,
  @ctrerr,
  @empty,
  @firstofone,@firstoftwo,
  @gobble,
  @ifclassloaded,
  @ifnextchar,
  @ifpackageloaded,
  @ifstar,
  @roman,@Roman,
  @secondoftwo,
  @slowromancap,
  % A:
  addbibresource,
  addtokomafont,
  ae,AE,
  AfterEndPreamble,AfterPreamble,AfterEndDocument,AfterEndEnvironment,
  alph,Alph,
  appto,
  author,
  autodot,
  arabic,
  AtBeginDocument,AtBeginEnvironment,AtEndDocument,AtEndEnvironment,
    AtEndPreamble,
  % B
  baselineskip,
  BeforeBeginEnvironment,
  begingroup,
  bfseries,
  bgroup,
  boolfalse,booltrue,
  % C
  c,
  caption,
  cb,
  centering,
  chapter,
  cleardoublepage,
  clearpage,
  color,
  cref,
  csdef,
  cslet,csletcs,
  csname,
  csuse,
  % D
  d,
  date,
  dh,
  DH,
  DeclareListParser,
  DeclareRobustCommand,
%  DeclareTranslation,DeclareTranslationFallback,
  deffootnote,deffootnotemark,
  definecolor,
  descriptionlabel,
  dimexpr,
  discretionary,
  dj,DJ,
  documentclass,
  % E
  egroup,
  emph,
  endcsname,
  endgroup,
  endnote,
  enlargethispage,
  expandonce,
  % F
  fbox,
  fontsize,fontshape,fontspec,
  footnote,footnotesize,footnotetext,
  forlistloop,
  foreignlanguage,
  frenchspacing,
  % G
%  GetTranslation,
  global,
  % H
  H,
  hskip,
  hspace,
  huge,Huge,
  hypersetup,
  hyphenation,
  % I
  ifblank,
  ifbool,ifboolexpe,ifboolexpr,
  ifcsdef,
  ifcsname,
  ifdef,
  ifinlist,
  ifstr,
  ifstrempty,
  ifstrequal,
  ignorespaces,ignorespacesafterend,
  include,includeonly,
  indent,
  input,InputIfFileExists,
  item,
  itshape,
  % J
  j,
  % K
  k,
  KOMAoption,
  KOMAoptions,
  % L
  l,L,
  labelenumi,labelenumii,labelenumiii,labelenumiv,
  label,
  labelitemi,labelitemii,labelitemiii,labelitemiv,
  labelsep,
  large,Large,LARGE,
  LaTeX,LaTeXe,
  linebreak,linewidth,
  listadd,
  LoadClassWithOptions,LoadClass,
  lstinline,lstinputlisting,
  ltx@ifnextchar,
  LuaLaTeX,LuaTeX,
  % M
  maketitle,
  mathparagraph,
  mathsection,
  mbox,
  mdseries,
  % N
  NeedsTeXFormat,
  newbool,
  newcommand,
  newcounter,
  newfontfamily,
  newlabel,
  newline,
  newpage,
  newrobustcmd,
  ng,NG,
  node,
  nolinebreak,
  nonfrenchspacing,
  noindent,
  notblank,
  nopagebreak,
  normalsize,normalfont,
  number,numexpr,
  % O
  o,O,oe,OE,
  othersectionlevelsformat,
  % P
  P,
  pagebreak,
  par,
  paragraph,
  parindent,
  part,partformat,partname,
  patchcmd,
  pdfLaTeX,
  pdfstringdefDisableCommands,
  pdfTeX,
  pgfkeys,
  pounds,
  preto,
  printacronyms,
  printbibliography,
  printendnotes,
  printindex,
  ProcessPgfOptions,
  ProcessOptions,
  protected,
  protecting,
  providecommand,providerobustcmd,
  ProvidesClass,
  ProvidesPackage,
  % Q
  quad,qquad,
  % R
  r,
  raggedright,raggedleft,RaggedRight,
  ref,
  refstepcounter,
  relax,
  renewcommand,renewrobustcmd,
  RequirePackage,
  rightarrow,
  robustify,
  roman,Roman,
  rmfamily,
  % S
  S,
  samepage,
  scriptsize,
  scshape,
  section,
  selectfont,
  selectlanguage,
  setcapindent,
  setcounter,
  setfnpct,
  setkomafont,
  setlength,
  setmainfont,
  setmainlanguage,
  setmonofont,
  setotherlanguage,
  setotherlanguages,
  setsansfont,
  shorthandoff,
  shorthandon,
  sidenote,
  sffamily,
  slshape,
  small,
  ss,SS,
  stepcounter,
  subparagraph,
  subsection,
  subsubsection,
  % T
  t,
  tableofcontents,
  TeX,
  test,
  textasciicircum,
  textasciitilde,
  textasteriskcentered,
  textbackslash,
  textbar,
  textbf,
  textbraceleft,
  textbraceright,
  textcolor,
  textcompwordmark,
  textdollar,
  textemdash,textendash,
  textenglish,
  textexclamdown,
  textgreater,
  textit,
  textless,
  textmd,
  textogonekcentered,
  textrm,
  textsc,
  textsf,
  textquestiondown,
  textquotedbl,textquotedblleft,textquotedblright,
  textquoteleft,textquoteright,
  textsc,
  textsection,
  textsl,
  textsubscript,
  textsuperscript,
  textsterling,
  texttt,
  textunderscore,
  textup,
  textwidth,
  th,TH,
  the,
  theendnotes,
  theenumi,theenumii,theenumiii,theenumiv,
  thefootnotemark,
  thepart,
  tikz,
  tiny,
  title,
  today,
  ttfamily,
  two@digits,
  % U
  usecounter,
  usepackage,
  upshape,
  % V
  v,
  vskip,vspace,
  % W
  % X
  xdefinecolor,
  XeLaTeX,XeTeX
  % Y
  % Z
}

% --------------------------------------------------------------------------
% command names `morekeywords' that are used as not-indexed texcs for the
% listings style `cnltx':
\def\cnltx@predefined@environments{%
  center,
  description,
  document,
  enumerate,
  figure,
  flushleft,
  flushright,
  itemize,
  labeling,
  longtable,
  otherlanguage,
  tabbing,
  table,
  tabu,
  tabular,
  tabularx,
  tabulary,
  verbatim
}

% --------------------------------------------------------------------------
% helper commands that print the list of additionally defined keywords and
% texcs:
\def\cnltx@print@list@sep{, }

\pgfkeys{
  cnltx/.cd,
    list-known-sep/.code = \def\cnltx@print@list@sep{#1}
}

\newrobustcmd*\cnltx@write@list@entry[2]{%
  #1*{#2}\def\cnltx@write@list@entry##1##2{\cnltx@print@list@sep ##1*{##2}}%
}

\newrobustcmd*\cnltx@write@list[2]{%
  \cnltx@fullexpand@twoargs
    \forcsvlist
    {\noexpand\cnltx@write@list@entry\noexpand#2}
    {\expandonce#1}%
}

\newrobustcmd*\listsilentcmds{%
  \cnltx@write@list\cnltx@predefined@control@sequences\cs
}
\newrobustcmd*\listsilentenvs{%
  \cnltx@write@list\cnltx@predefined@environments\env
}

\endinput

% --------------------------------------------------------------------------
HISTORY:

2013/09/15 v0.4 - first published version
2013/09/18 v0.5 - merged with `cnltx-csnames', added a number of command names


